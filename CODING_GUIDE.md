# CODING_GUIDE

本文件定義本 repo 的開發實作原則，目標是以「可驗證、可回滾」的方式交付。

## 核心原則
### **修改原則**
  若是對既有專案做修改，理解此次改動的關鍵目的，在完成此目的的前提下：
  - 只能改動與bug或重構直接相關的區塊
  - 不得改變任何對外可觀察行為（characterization/contract tests 必須全過）
  - 除非特別要求指定，儘量不破壞原有 API / 資料結構 / 前端路由。
  - 不要把整個架構翻掉，除非使用者明說要重構或換技術。
- 維持既有介面相容：除非需求明確要求，避免破壞既有 API、CLI 參數與資料格式。
- 安全優先：
  - 不得提交任何 API Key、Token、密碼等 secrets。
  - 金鑰一律透過環境變數提供（例如 `OPENAI_API_KEY`）。
  - 避免在 log、範例資料、測試輸出中暴露敏感資訊。

## Python 程式碼建議
- 優先撰寫可讀性高、單一職責的函式。
- 對檔案 I/O、網路呼叫、外部程序等易失敗流程，需有明確錯誤處理與可追蹤訊息。
- 例外處理需保留可診斷資訊（不要無聲吞錯）。
- 新增功能時，應同步補上或更新對應測試。

## 文件與變更紀錄
- 任何行為改動（API、CLI、設定、流程）都應同步更新相關文件。
- PR 描述需包含：
  - Summary（最多 3 點）
  - Risk（低/中/高與影響範圍）
  - Validation（實際執行指令與結果）
